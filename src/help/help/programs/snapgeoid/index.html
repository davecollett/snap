<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name="keywords" content="snapgeoid, geoid, coordinate file, station">
<link rel="stylesheet" type="text/css" href="../../snaphelp.css">

<title>snapgeoid - calculate geoid heights</title>

</head>

<body>



<h1>snapgeoid - calculate geoid heights</h1>

<h2>Overview</h2>

<p>SNAP <a href="../../files/crd/index.html">coordinate files</a> can optionally
contain information about the gravity field that SNAP can use in an
adjustment. This information can include
the geoid height (also called the separation or undulation) and the deflection
of the vertical. 
</p>

<p>The height information for a station in a
coordinate file can be one of </p>

<p class="BulletList"> orthometric height</p>

<p class="BulletList"> ellipsoidal height</p>

<p class="BulletList"> orthometric height and geoid information</p>

<p class="BulletList"> ellipsoidal height and geoid information</p>

<p>The geoid information may defined explicitly for each station, or by specifying 
a geoid (or height reference surface) in terms of which orthometric heights are calculated.
Orthometric heights are calculated by subtracting the geoid height from the ellipsoidal 
height. Strictly this is not an orthometric height however practically it is a useful 
approximation to orthometric heights.
</p>

<p>
snapgeoid is a program to convert between these geoid options. It calculates geoid
heights and deflections of the vertical from a gridded model stored in a binary file.</p>

<p>Note that when snapgeoid is changing geoid information in a coordinate file it will
recalculate the geoid height for each station, which means recalculating the relationship
between the orthometric and ellipsoidal heights.  Generally when snapgeoid does this it keeps
the ellipsoidal height unaltered and updates the orthometric height.  The exceptions to this
are: 
</p>
<ul>
    <li>if the station coordinate file has no geoid information and specifies that the heights are orthometric</li>
    <li>if snapgeoid is run with the -o option to preserve orthometric heights.</li>
</ul>
<p>
The reason for retaining the ellipsoidal height is that generally converting between orthometric height 
systems the expectation is that the orthometric height will be changed (for example converting 
between NZVD2009 and NZVD2016).
</p>

<p>The SNAP <a href="../../coordsys/index.html">coordinate system definition file</a> defines a list of 
height reference surfaces that can be used by snapgeoid.  Each is reference by a code, for example &quot;NZVD2016&quot;.
The list of height reference surfaces can be defined with the -l option.
</p>

<p>
Alternatively the snpgeoid -g option can be used to calculate geoid information from a gridded geoid height model in a
<a href="../../coordsys/geoid.html">geoid file</a>.
</p>

<h2>Running snapgeoid</h2>

<p>snapgeoid is a command line
utility run from a DOS prompt. The syntax for the command is</p>

<p class="Commanddefinition">snapgeoid -l</p>
<p class="Commanddefinition">snapgeoid [-c|-x] [-h <i>hrs_code</i>|-g <i>geoid</i>] [-e|-o] [<i>options</i>] station_file [new_file]</p>

<p>In this command:</p>

<table class="CommandOptions">
<tr><td>
<p class="Commanddefinition">station_file</p></td><td><p> is the
name of the input station coordinate file</p>
</td></tr><tr><td>

<p class="Commanddefinition">new_file</p></td><td><p> is
the name of the new file that will be created.
If this is not specified then it will have the same name as
the input file, but with extension ".new".</p>
</td></tr>
</table>

<p>The following options can be used with snapgeoid:</p>

<table class="CommandOptions">
<tr><td>
<p class="Commanddefinition">-l</p></td><td><p> 
If specified then snapgeoid will list the available reference surface codes and exit
</td></tr>

<tr><td>
<p class="Commanddefinition">-h <i>hrs_code</i></p></td><td>
<p> Specifies the height reference surface to use to calculate geoid undulations.
Use the -l option to output a list of valid codes.
</p>
</td></tr>

<tr><td>
<p class="Commanddefinition">-g <i>geoid</i></p></td><td>
<p> Specifies the geoid file to use to calculate geoid undulations.
</p>
</td></tr>

<tr><td>
<p class="Commanddefinition">-x</p></td><td><p> Causes
snapgeoid to remove the geoid information from the output coordinate file.  
</p>
</td></tr>

<tr><td>
<p class="Commanddefinition">-c</p></td><td><p> Causes
snapgeoid to calculate new geoid heights even if the coordinate
file already contains geoid heights.  By default the snapgeoid only
adds geoid information if it is not already defined.
</p>
</td></tr>

<tr><td>
<p class="Commanddefinition">-e</p></td><td><p> forces
snapgeoid to preserve ellipsoidal heights if the geoid height is changed
and write ellipsoidal heights to the output file</p>
</td></tr>

<tr><td>
<p class="Commanddefinition">-o</p></td><td><p> forces
snapgeoid to preserve orthometric heights if the geoid height is changed
and write orthometric heights to the output file.</p>
</td></tr>

<tr><td>
<p class="Commanddefinition">-k</p></td><td><p> forces 
snapgeoid to keep the height type in the coordinate file 
unaltered even if the -e or -o option are used to specify
which type to preserve.
</p>
</td></tr>

<tr><td>
<p class="Commanddefinition">-i</p></td><td><p> forces 
ignore errors calculating the geoid height for specific 
stations.  For these stations the geoid information is unaltered.
</p>

<tr><td>
<p class="Commanddefinition">-q</p></td><td><p> reduces the 
amount of output generated by snapgeoid.
</p>

</td></tr>

</table>

<p>Note that cannot specify both the -h and -g options or both the -e and -o options.  
If neither are specified then the output coordinate file will use the same
height type as the input file.
If neither the -h or -g option are specified then the -e and -o options will set the
height type in the coordinate file, converting heights according to the geoid information
in the file.
</p>
<div class="SeeAlso">
<h3>See also:</h3>
<p><a href="../../files/crd/index.html">Coordinate files</a></p>
<p><a href="../../coordsys/geoid.html">Geoid files</a></p>


</div>
</body>

</html>
